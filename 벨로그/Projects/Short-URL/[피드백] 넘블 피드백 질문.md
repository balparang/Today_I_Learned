# 들어가며



# 피드백 내용

> 23.05.13 토 오전 10:00 넘블 호스트님의 피드백

## 공통 피드백

### CI/CD는 프로젝트 시작 이전에 구성하자

> 💡 "_CI/CD 는 프로젝트를 진행할때 개발의 생산성을 올려주는 중요한 도구입니다. 가급적 프로젝트를 시작하기 전에 구성을 하고 나서 진행을 하는것을 권장 드립니다. 또한 CI와 CD는 각각 다른 프로세스 입니다. 간혹 이 둘을 하나의 파이프라인으로 구성하는 경우도 있는데 CI와 CD가 각각 무엇을 하는지를 알아보고 공부하면 더 좋을것 같습니다._"

<br>

**※ Reference**

- [https://www.redhat.com/ko/topics/devops/what-is-ci-cd](https://www.redhat.com/ko/topics/devops/what-is-ci-cd)
- [https://seongwon.dev/DevOps/20220715-CICD구축기1/](https://seongwon.dev/DevOps/20220715-CICD%EA%B5%AC%EC%B6%95%EA%B8%B01/)
- [https://ji5485.github.io/post/2021-06-06/build-ci-cd-pipeline-using-github-actions/](https://ji5485.github.io/post/2021-06-06/build-ci-cd-pipeline-using-github-actions/)

### 문서화 과정에서 공부가 된다

> 💡  _"문서화 또는 기록 부분에서 평가 점수를 높게한 이유는, 개발을 하는건 누구나 다 할줄 알지만 그것을 표현하는건 또 다른 영역입니다. 프로젝트를 진행하면서 겪었던 트러블 슈팅이나 시행착오들을 기록하면서 그것들을 본인의 것으로 만들어 가는 과정 또한 공부가 되기에 작성해달라고 요청 드렸었고, 이 프로젝트가 어떤 프로젝트인지 상대방에게 소개하는것 또한 연습이 필요하기에 가급적이면 readme 나 개인 기술블로그를 통해서 이러한 내용들이 작성되면 좋을것 같습니다."_

<br>

**※ Reference**

- [https://velog.io/@luna7182/백엔드-프로젝트-README-쓰는-법](https://velog.io/@luna7182/%EB%B0%B1%EC%97%94%EB%93%9C-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-README-%EC%93%B0%EB%8A%94-%EB%B2%95)
- [https://www.freecodecamp.org/korean/news/gisheobeu-peurojegteue-rideumi-paileul-jal-jagseonghaneun-bangbeob/](https://www.freecodecamp.org/korean/news/gisheobeu-peurojegteue-rideumi-paileul-jal-jagseonghaneun-bangbeob/)

### Pull Request 시 리뷰를 받는다는 것을 가정하고 하자 

> 💡 "_pullRequest가 단순 merge용이 되면 안될것 같습니다. 제목과 본문을 제대로 작성하셔서 어떤 내용의 작업인지 한눈에 볼수 있으면 좋을것 같아요. 혼자서 진행하는 프로젝트 일지라도 리뷰어에게 리뷰를 받는다는걸 가정하고 연습하면 좋을 것 같습니다._"

<br>

**※ Reference**

- [https://wayhome25.github.io/git/2017/07/08/git-first-pull-request-story/](https://wayhome25.github.io/git/2017/07/08/git-first-pull-request-story/)
- [https://joyful-development.tistory.com/14](https://joyful-development.tistory.com/14)



## 개인 피드백 

### ⭐️ 명시적인 테이블 이름 사용하기 

> 👨🏻‍🏫 _"url_call 이라기 보다 더 명시적으로 테이블 이름이 되면 좋을것 같습니다."_

- 현재는 url 호출이 있을 때마다 해당 호출 기록을 DB에 저장해두고 있음.
- 날짜별 조회수랑 Referer 별 조회수를 같이 저장할 구조가 생각나지 않아 이처럼 구현했음.
- 이러한 단축 URL 서비스의 테이블 구조는 어떻게 설계 해보면 좋을 지
- 만약 호스트님이시라면 어떻게 구성해보셨을 지 궁금

### REST Docs로 생성한 HTML파일을 Github Pages에 업로드 해보기  

> 👨🏻‍🏫  _"restdocs로 문서화를 하려는 시도가 좋아보입니다. 만들어진 html을 github pages로 활용하여 github에 호스팅을 시도해볼수 있을것 같습니다."_

REST Docs에 접근할 수 있는 엔드포인트(`"/api/docs"`)를 추가해서 이를 제공했다. 

### ⭐️ 책임 분리 Vs. 관리 비용 증가

> 👨🏻‍🏫 _"UrlCretor, UrlReader 등 이렇게 나눈 이유를 잘 모르겠습니다. 책임을 분리하는 목적은 이해가 되지만 관리비용이 늘어나 보여서요."_
> 

- 책임 분리와 관리 비용은 서로 양립할 수 없는 것처럼 느껴집니다.
- public 메서드를 하나만 갖게끔 함으로써 책임을 더 작은 단위로 쪼갰고 
- 수정이 필요하면 해당 클래스를 바로 찾아갈 수 있으니까 바로 관리 비용이 줄어든다고 생각했습니다.
- 관리 비용이 늘어난다는 의미를 정확하게 모르겠습니다. 


### ⭐️ 테스트의 실행시간은 가급적 짧게 유지하자

> 👨🏻‍🏫 "_테스트는 가급적 실행 시간이 짧아야 합니다. CI에서 실행을 하게 될텐데 속도가 느리다면 개발 생산성을 높이고자 도입한 CI 가 오히려 병목이 될수 있어서요. 그에  따라 테스트 코드를 어떻게 하면 빠르게 돌릴수 있을지, 어떤 테스트 방법들이 있을지 고민해봐도 좋을것 같아요._"

레이어별로 @SpringBootTest를 사용하지 말고 필요한 빈만 주입받으라는 말씀이실까요?


서비스 레이어에서 @DataJpaTest 를 사용하는 것은 어떻게 생각하시는지? 



### ⭐️ 테스트 코드를 작성 시 bean으로 만드는 게 옳은 방법일까?

> 👨🏻‍🏫 "_테스트 코드를 작성할때 bean으로 만드는게 옳은 방법일지 고민이 필요해 보입니다._"

- 실제 Bean 이 아니라 MockBean 으로 테스트하라는 말씀이실지?
- @TestConfiguration 말고 실제 Bean 을 주입해보라는 말씀이실지? 

### DB 접속 정보를 git에 노출하는 것은 보안적으로 좋지 않다

> db 접속정보가 코드 상에 그대로 있는 모습이 보안적으로 좋지 않아 보입니다. github을 사용하면서 어떻게 이런 민감한 정보들을 관리 할수 있을지 고민해 봐도 좋을것 같아요.

- 인텔리제이에서 환경변수를 세팅했을 때는 운영상에서는 이렇게 못 쓴다는 단점이 있다.  
- 찾아본 바로는 깃헙 서브 모듈을 이용하는 방법이 있다.
- 이전에 프로젝트할 때는 yml 파일을 통째로 주입해주는 식으로 했었는데 어떻게 생각하시는지?
- 다른 방법이 있을지? 
- 실무에서는 이러한 환경변수를 어떻게 관리하는지?


### ⭐️글로벌한 예외처리의 에러 로깅 레벨이 INFO이어야 할까?

> 💡 _"예외처리를 글로벌하게 처리한 부분은 좋아보입니다. 다만 이때의 에러 로깅의 레벨이 info인지는 고민을 해봐도 좋을것 같아요."_

- 구체적으로 예외 컨텍스트를 예측하지 못한 RuntimeException이 발생할 때는 Error로 남기고, BusinessException 은 예측 가능한 범위 이므로 INFO 로 남기는 것이 어떨까요?
- 실무에서 Error, Warn, Info, debug 등으로 나누는 호스트님의 기준이 있을까요? 

```java
@Slf4j
@RestControllerAdvice
public class GlobalExceptionHandler {

	@ExceptionHandler(RuntimeException.class)
	private ResponseEntity<ErrorResponse> handleRuntimeException(RuntimeException e) {
		log.info("handleRuntimeException", e);
		return errorResponse(HttpStatus.INTERNAL_SERVER_ERROR, HttpStatus.INTERNAL_SERVER_ERROR.getReasonPhrase());
	}
	
	// ...

	private ResponseEntity<ErrorResponse> errorResponse(HttpStatus status, String errorMessage) {
		return new ResponseEntity<>(new ErrorResponse(status, errorMessage), status);
	}
}
```

## 마치며

### Reference

- Shortify Github
