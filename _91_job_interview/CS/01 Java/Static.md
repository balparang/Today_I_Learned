
# Static


<details>
    <summary><b>static 키워드에 대해 설명해주세요.</b></summary> 

> 👉
> - 자바에서 static 키워드를 사용하는 것은 클래스가 로드될 때 메모리에 단 한 번만 할당되어 프로그램이 종료될 때 메모리에서 해제됨을 의미합니다. 단 가비지 컬렉션에 의해 직접적으로 관리되지 않으므로 시스템 퍼포먼스를 고려하여 사용할 필요가 있습니다.
> - static 은 변수나 메서드, 특정 코드블럭 앞에 선언할 수 있으며, 이 중 static 멤버는 클래스당 하나만 생성되며, 같은 클래스의 모든 인스턴스가 공유한다는 특징을 가집니다.

</details>

<details>
    <summary><b>static 멤버와 non-static 멤버는 무슨 차이가 있나요?</b></summary>

> 👉 `non-static` 멤버는 객체마다 별도로 존재하고 객체간 공유되지 않습니다. 객체가 생성될 때 같이 생성되고 삭제 시 같이 삭제됩니다. 반면에 `static` 멤버는 클래스 당 하나만 생성되고 같은 클래스의 모든 객체에 의해 공유됩니다. 클래스 로딩 시에 멤버가 생성되며, 프로그램 종료 시에 삭제됩니다.

- `non-static` 멤버
    - 공간적 특성
        - 멤버가 객체마다 별도로 존재
        - `인스턴스 멤버` 라고 부른다.
    - 시간적 특성
        - 객체와 생명 주기가 동일하다.
    - 공유의 특성
        - 객체 간 공유되지 않는다.
        - 멤버는 객체 내에서 각각의 공간을 차지

- `static` 멤버
    - 공간적 특성
        - 멤버가 클래스당 하나만 생성된다.
        - `클래스 멤버`라고 부른다.
    - 시간적 특성
        - **_클래스 로딩 시에 멤버가 생성된다._**
        - 객체의 생성 여부와 상관없이 사용 가능.
        - 프로그램이 종료될 때 삭제된다.
    - 공유의 특성
        - 동일한 클래스의 모든 객체에 의해 공유된다.

_※ 클래스의 `멤버`란?_
- 속성을 표현하는 `필드`와 기능을 표현하는 `메서드`를 일컬어 '멤버'라고 한다.

_※ 인스턴스의 메서드는 힙 메모리에 만들어지지 않는다._

- 메서드 코드는 실행 시작 시점에 클래스 로더에 의해 `코드 영역`에 만들어지고 이후 다시 메모리에 만들어지지 않는다.
- 인스턴스 메서드는 코드 영역에 생성된 내용을 사용한다.
- 인스턴스 변수만 힙 메모리에 생성된다.

</details>

<details>
    <summary><b>main 메서드는 왜 static 메서드인가요?</b></summary> 

> 👉 static 멤버는 프로그램 시작 시 메모리에 로드되어 인스턴스를 생성하지 않고 사용이 가능합니다. JVM은 인스턴스를 생성하지 않은 채 클래스의 main 메서드를 호출해야하기 때문에 main 메서드는 static 이어야 합니다.

- `static` 키워드
    - static 멤버는 클래스 로딩(프로그램 시작) 시에 메모리에 로드되므로, 인스턴스 생성없이 호출 가능하다.
- JVM 이 main 메서드를 실행하는 과정
    - 컴파일을 실행하면 컴파일러가 .java 파일을 .class 바이트 코드로 변환
    - 클래스 로더가 .class 파일을 메모리 영역에 로드
    - 메모리의 Runtime Data Area 중 메서드 영역(=Class Area, Static Area)에 클래스 변수들이 저장되는 데, static 멤버도 여기에 포함
    - JVM은 메모리의 메서드 영역에 로드된 main()을 실행

</details>

<details>
    <summary><b>자바 프로그램 실행 시 static 이 붙은 변수는 어떻게 처리되나요?</b></summary>

> 👉 먼저 static 변수를 호출하게 되면 클래스로더가 해당 클래스를 메모리의 Runtime Data Area 에 로드합니다. 클래스가 로드되면서 static 변수는 코드 영역에 저장되고, 초기화 됩니다. 마지막으로 초기화가 완료된 후의 static 변수를 사용하게 됩니다.

- static 변수 호출
- 클래스 로더가 해당 클래스 파일을 가져와서 JVM의 메모리에 로드 (동적 로딩)
- 이 때 static 변수를 메모리의 Runtime Data Area의 코드 영역에 저장하고 초기화.
- static 변수 사용

📄 **Ref**

- [클래스는 언제 메모리에 로딩 & 초기화 되는가](https://inpa.tistory.com/entry/JAVA-%E2%98%95-%ED%81%B4%EB%9E%98%EC%8A%A4%EB%8A%94-%EC%96%B8%EC%A0%9C-%EB%A9%94%EB%AA%A8%EB%A6%AC%EC%97%90-%EB%A1%9C%EB%94%A9-%EC%B4%88%EA%B8%B0%ED%99%94-%EB%90%98%EB%8A%94%EA%B0%80-%E2%9D%93)

</details>

---