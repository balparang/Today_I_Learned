# 02. 이상한 나라의 객체 - 행동이 상태를 결정한다.

<br>

# 객체란 무엇인가?

- 객체란 식별 가능한 개체 또는 사물이다.
- 객체는 자동차처럼 만질 수 있는 구체적인 사물일 수 도 있고, 시간처럼 추상적인 개념일 수 도 있따.
- 객체는 구별가능한 `식별자` , 특징적인 `행동`, 변경 가능한 `상태`를 가진다.
- 소프트웨어 안에서 객체는 **저장된 상태**와 **실행가능한 코드**를 통해 구현된다.

<br>

# 상태
> - 상태는 특정 시점에 객체가 가지고 있는 정보의 집합으로 객체의 구조적 특징을 표현한다.
> - 객체의 상태는 객체에 존재하는 정적인 프로퍼티와 동적인 프로퍼티 값으로 구성된다.
> - 객체의 프로퍼티는 단순한 값과 다른 객체를 참조하는 링크로 구분할 수 있다.

### 상태가 필요한 이유

- 상태를 이용하여 과거에 얽매이지 않고 현재를 기반으로 객체의 행동방식을 이해할 수 있다.

<br>

# 행동

> - 행동이란 외부의 요청 또는 수신된 메시지에 응답하기 위해 동작하고 반응하는 활동이다.
> - 행동의 결과로 다음 두 가지 부수 효과(side effect)를 명확히 설명해야한다.
>   1. **객체 자신의 상태 변경**
>   2. **행동 내에서 협력하는 다른 객체에 대한 메시지 전송**
> - 객체는 행동을 통해 다른 객체와의 협력에 참여하므로, 행동은 외부에 가시적(`public`)이어야 한다.

객체는 스스로의 행동에 의해서만 상태가 변경되고, 이렇게 함으로써 `자율성` 을 유지할 수 있다.

객체의 행동은 상태에 영향 받으며(상태에 의존적), 객체의 행동은 상태를 변경시킨다(부수 효과).

### 협력과 행동

- 객체는 다른 객체에 요청을 보냄으로써 다른 객체와 협력한다. 객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법이다.
- 객체는 협력에 참여하면서 스스로의 상태뿐만 아니라 다른 객체의 상태 변경을 유발할 수 있다.

### 상태 캡슐화

- 객체에게 메시지를 전달하는 외부의 객체는 메시지를 수신하는 객체의 상태가 변경된다는 사실조차 알지 못한다.
- 메시지를 수신하는 객체에서 메시지를 해석하고 그에 반응할 지, 반응하여 상태를 변경할 것인지에 대한 여부는 수신자의 자율적인 판단하에 이루어진다.

<br>

# 식별자

> - 식별자란 어떤 객체를 다른 객체와 구분하는 데 사용하는 객체의 프로퍼티다. 모든 객체는 식별자를 가진다.
> - 객체는 상태가 변경될 수 있기 때문에 식별자를 이용한 동일성 검사를 통해 두 인스턴스를 비교할 수 있다.

### 동등성(equality)과 동일성(identical)

- 값(value)의 경우, 두 인스턴의 상태가 같다면 두 인스턴스를 같은 것으로 판단한다. 이것을 동등성(equality)라고 한다.
- 두 객체의 상태가 다르더라도 식별자가 같다면 두 객체를 같은 객체로 판단한다. 어린 시절의 나는 현재의 나보다 키도 작고 나이도 어리지만 현재의 나와 동일한 인물이다. 즉, 식별자를 기반으로 객체가 같은지를 판단할 수 있으며, 이것을 동일성(identical)이라고 한다.

<br>

# 행동이 상태를 결정한다.

- 협력에 참여하는 훌륭한 객체를 만들기 위해, 상태가 아니라 행동에 초점을 맞추어라.
- **객체지향 설계는 애플리케이션에 필요한 협력을 생각하고 협력에 참여하는 데 필요한 행동을 생각한 후 행동을 수행할 객체를 선택하는 방식으로 선택된다. (협력 ⇒ 행동 ⇒ 상태 순으로 설계)**
- 행동을 결정한 후에야 필요한 정보가 무엇인지를 고려하게 되고, 이 과정에서 필요한 상태가 결정된다.

<br>

# 이상한 나라를 창조하라.

- 객체지향 세계는 현실 세계의 단순한 모방이 아니다. 창조해낸 **객체의 특성을 상기시킬 수 있다면 현실 속의 객체의 이름 이용해 객체를 묘사**해도 된다. 그렇지 않다면 차라리 **깔끔하게 현실을 무시하고 스스로의 새로운 세계를 창조**하는 편이 낫다.