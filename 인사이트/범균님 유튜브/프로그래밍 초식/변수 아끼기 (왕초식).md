> https://youtu.be/kRdML08R2Yo?si=gLF-0ovHFRw2NxbN 

> 👉 _변수 아끼고, 변경 줄이고, 범위를 좁힘으로써 복잡도를 낮추고 가독성을 높여라!_

<!-- TOC -->
* [레거시에서 종종 만나는 코드 형태](#레거시에서-종종-만나는-코드-형태)
  * [레거시 코드 형태](#레거시-코드-형태)
    * [변수 미리 선언](#변수-미리-선언)
    * [변수의 용도/의미를 바꿔가며 사용](#변수의-용도의미를-바꿔가며-사용)
  * [왜 안 좋은가? 👉 인지 부하](#왜-안-좋은가--인지-부하)
* [그래서 변수 아껴쓰기 1](#그래서-변수-아껴쓰기-1)
  * [선언하고 1~2번 참조하는 변수는 필요 여부 검토](#선언하고-12번-참조하는-변수는-필요-여부-검토)
* [그래서 변수 아껴쓰기 2](#그래서-변수-아껴쓰기-2)
  * [의미를 더해 주는 변수 위주로 사용하기](#의미를-더해-주는-변수-위주로-사용하기)
    * [식이 복잡하거나 길어질 경우 변수 이름으로 설명](#식이-복잡하거나-길어질-경우-변수-이름으로-설명)
    * [같은 계산을 반복하는 경우 변수로 재사용](#같은-계산을-반복하는-경우-변수로-재사용)
    * [가능한 선언과 값 할당을 한 번에](#가능한-선언과-값-할당을-한-번에)
  * ['절대로' 변수의 용도/의미 변경 X](#절대로-변수의-용도의미-변경-x)
    * [의미나 용도가 다르면 다른 변수 사용할 것](#의미나-용도가-다르면-다른-변수-사용할-것)
  * [변수 범위 좁히기](#변수-범위-좁히기)
    * [블록 안으로 한정](#블록-안으로-한정)
    * [사용되기 직전에 정의](#사용되기-직전에-정의)
* [초짜라면 변수를 아끼는 연습하기](#초짜라면-변수를-아끼는-연습하기)
<!-- TOC -->


# 레거시에서 종종 만나는 코드 형태

## 레거시 코드 형태

### 변수 미리 선언

```java
 // 변수를 미리 선언하고
String name = any.getName();
int age = 0;

    ... 

// 중간에 변경도 하고..
age = 2021 - any.getBirthYear()

    ...


// 사용하고
System.out.println("이름: " + name)
System.out.println("이름: " + name)
```

### 변수의 용도/의미를 바꿔가며 사용

```java
int value = someOp();
    ...
    
if (value == 0) {
    value = someOp2();
    ...
}

value = someOp3();

if (value == 2) {
	
}	
```

## 왜 안 좋은가? 👉 인지 부하

- 변수의 범위 증가, 변수 개수 증가, 변수 용도 변화...
  - 결국 추적이 복잡해지고 👉 인지 부하
- 코드를 이해하는데 드는 비용, 노력이 증가하고 👉 곧 코드 변경이 어려워짐을 의미


# 그래서 변수 아껴쓰기 1

## 선언하고 1~2번 참조하는 변수는 필요 여부 검토

```java
String name = any.getName();
String id = any.getId();

Summary ret = Summary.builder()
    .name(name)
    .id(id)
    .build();
```

⬇️

```java
Summary ret = Summary.builder()
    .name(any.getName())
    .id(any.getId())
    .build();
```

- 인지 부하로 인해 발생하는 코드 변경 비용을 줄이려면, 변수를 아껴써야한다.
- 선언하고 한 두 번 밖에 참조하지 않는 변수가 있다면, 이런 변수가 꼭 필요한지 검토해야한다.
- **_변수를 아끼자는 것이 무조건 변수를 사용하지 말자라는 것은 아님_**.

---

# 그래서 변수 아껴쓰기 2

---

## 의미를 더해 주는 변수 위주로 사용하기

### 식이 복잡하거나 길어질 경우 변수 이름으로 설명

- `int age = 2021 - mem.getBirthYear();`

### 같은 계산을 반복하는 경우 변수로 재사용

### 가능한 선언과 값 할당을 한 번에

```java
int age;

... (age 사용 없음)
        
age = 2021 - mem.getBirthYear();`
```

---

## '절대로' 변수의 용도/의미 변경 X

### 의미나 용도가 다르면 다른 변수 사용할 것

- 단순히 타입이 같다고 변수를 막 이런 저런 용도로 쓰지 말 것
- 코드 분석뿐만 아니라 향후 코드 정리도 힘들게 함

```java
// Bad Code 🤯 
Response<String> response = callApi1();
...
...
response = callApi2();
```

⬇️

```java
// Good Code 👍
Response<String> response1 = callApi1();
...
...
Response<String> response2 = callApi2();
```

---

## 변수 범위 좁히기

- **변수가 사용되는 코드 범위를 최소화 하기**
  - 짧은 루프 블록 안으로 한정
  - 짧은 if-else 블록 안으로 한정
  - 짧은 메서드로 한정
  - **_사용되기 직전에 정의_**
- 코드를 볼 때, 변수가 어떻게 사용되는지 추적을 해야하는데, 그 범위가 짧으면 짧을수록 코드 이해의 부하가 줄어든다.

### 블록 안으로 한정

```java
String msg;
for (Some some : somes) {
    msg = some.getName() + ":" + ...;	
}
```

⬇️

```java
for (Some some : somes) {
    String msg = some.getName() + ":" + ...;	
}
```

### 사용되기 직전에 정의

```java
String msg = ...;
... (코드 10줄, msg 변경 없음)
return Result.message(msg);
```

⬇️

```java
... (코드 10줄)
String msg = ...;
return Result.message(msg);
```

- 위처럼 바꾸면 그 사이의 코드 10줄을 안 봐도 된다!

---

# 초짜라면 변수를 아끼는 연습하기

- 멋진 설계, 화려한 기술 다 좋지만 **기본인 코드는 정말 중요.**
  - 코드가 없다면 모두 소용없음.


- 중요한 코드의 복잡도를 낮추고 가독성을 높이는 쉬운 방법
  - 👉 변수 아끼고, 변경 줄이고, 범위 좁히고
