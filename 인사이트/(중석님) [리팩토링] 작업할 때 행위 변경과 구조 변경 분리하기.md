> https://youtu.be/BZcLjckNKyA?feature=shared

# 작업할 때 행위 변경과 구조 변경 분리하기

> 리팩토링과 기능 변경을 하나의 작업으로 할 경우 안전성이 떨어지고, 리뷰 복잡도가 올라간다.

- 구조변경과 행위변경이 있음.
- 리팩토링 시에는 행위가 변경되지 않아야한다고함.
- 기존에 있는 기능을 리팩토링을 할 때는 테스트해야한다는 생각이 들면 안 됨.
  - 테스트를 해야할 것 같고 불안하다 싶으면 그건 **리팩터링이 아니라 행위가 변경되었다고 볼 수 있음.**
- 코드리뷰를 할 때도 구조 변경이랑 행위 변경이 있으면 보기가 까다롭다.
  - **행위 변경은 진짜 중요한 작업**. 기능 변경. 정책 변경 등. 
    - 장애가 날 수도 있는 거기도 하고, 그래서 테스트도 더 중요. 
  - 구조 변경은 비즈니스에 어떤 영향도 미치지 않기 때문에
- 행위 변경과 구조 변경이 같이 있으면 롤백할 때도 문제가 될 수 있다.
- 리팩토링 하고 나서 장애가 일어나면 당연히 인식이 안 좋아질 것.


## 변경의 종류

### 구조 변경

- rename
- introduce variable, parameter
- extract delegate

### 행위(기능) 변경

- totalAmount의 결과각 1 -> 2로 변경되어야하는 경우
- class에 set을 해줘야하는 필드가 2개에서 3개로

## 리팩토링은 IDE의 도움으로

- IDE 도움으로 리팩토링을 진행할 때는 기능 변경 없이 안전하게 리팩터링 되기 때문에 테스트 해보지 않아도 기존 기능이 잘 동작하는 것을 보장 